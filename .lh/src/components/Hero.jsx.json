{
    "sourceFile": "src/components/Hero.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 6,
            "patches": [
                {
                    "date": 1735255299758,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1735261401066,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,8 +2,9 @@\n import { useGSAP } from \"@gsap/react\";\r\n import { ScrollTrigger } from \"gsap/all\";\r\n import ImageTrack from \"./ImageTrack\";\r\n import { useState, useEffect } from \"react\";\r\n+import { HERO_STRING } from \"../consts/en\";\r\n \r\n gsap.registerPlugin(ScrollTrigger);\r\n \r\n const Hero = () => {\r\n@@ -123,13 +124,13 @@\n \r\n         <div className=\"absolute left-0 top-0 z-40 size-full\">\r\n           <div className=\"mt-24 px-5 sm:px-10\">\r\n             <h1 className=\"special-font hero-heading text-blue-100\">\r\n-              redefi<b>n</b>e\r\n+              {HERO_STRING.title}\r\n             </h1>\r\n \r\n             <p className=\"mb-5 max-w-64 font-robert-regular text-blue-100\">\r\n-              Enter the Metagame Layer <br /> Unleash the Play Economy\r\n+              {HERO_STRING.description}\r\n             </p>\r\n           </div>\r\n         </div>\r\n       </div>\r\n"
                },
                {
                    "date": 1735261411672,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -135,9 +135,9 @@\n         </div>\r\n       </div>\r\n \r\n       <h1 className=\"special-font hero-heading absolute bottom-5 right-5 text-black\">\r\n-        G<b>A</b>MING\r\n+        {HERO_STRING.subtitle}\r\n       </h1>\r\n     </div>\r\n   );\r\n };\r\n"
                },
                {
                    "date": 1735261592294,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -118,9 +118,9 @@\n           onPercentageChange={handlePercentageChange}\r\n         />\r\n \r\n         <h1 className=\"special-font hero-heading absolute bottom-5 right-5 z-40 text-blue-75\">\r\n-          G<b>A</b>MING\r\n+          {HERO_STRING.subtitle}\r\n         </h1>\r\n \r\n         <div className=\"absolute left-0 top-0 z-40 size-full\">\r\n           <div className=\"mt-24 px-5 sm:px-10\">\r\n"
                },
                {
                    "date": 1735261859183,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -117,19 +117,19 @@\n           externalPercentage={percentage}\r\n           onPercentageChange={handlePercentageChange}\r\n         />\r\n \r\n-        <h1 className=\"special-font hero-heading absolute bottom-5 right-5 z-40 text-blue-75\">\r\n+        <h1 className=\"special-font hero-heading absolute bottom-5 right-5 z-40 text-orange-500\">\r\n           {HERO_STRING.subtitle}\r\n         </h1>\r\n \r\n         <div className=\"absolute left-0 top-0 z-40 size-full\">\r\n           <div className=\"mt-24 px-5 sm:px-10\">\r\n-            <h1 className=\"special-font hero-heading text-blue-100\">\r\n+            <h1 className=\"special-font hero-heading text-orange-500\">\r\n               {HERO_STRING.title}\r\n             </h1>\r\n \r\n-            <p className=\"mb-5 max-w-64 font-robert-regular text-blue-100\">\r\n+            <p className=\"mb-5 max-w-64 font-robert-regular text-orange-500\">\r\n               {HERO_STRING.description}\r\n             </p>\r\n           </div>\r\n         </div>\r\n"
                },
                {
                    "date": 1735261879476,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -123,13 +123,13 @@\n         </h1>\r\n \r\n         <div className=\"absolute left-0 top-0 z-40 size-full\">\r\n           <div className=\"mt-24 px-5 sm:px-10\">\r\n-            <h1 className=\"special-font hero-heading text-orange-500\">\r\n+            <h1 className=\"special-font hero-heading text-white\">\r\n               {HERO_STRING.title}\r\n             </h1>\r\n \r\n-            <p className=\"mb-5 max-w-64 font-robert-regular text-orange-500\">\r\n+            <p className=\"mb-5 max-w-64 font-robert-regular text-white\">\r\n               {HERO_STRING.description}\r\n             </p>\r\n           </div>\r\n         </div>\r\n"
                },
                {
                    "date": 1735261888409,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -117,9 +117,9 @@\n           externalPercentage={percentage}\r\n           onPercentageChange={handlePercentageChange}\r\n         />\r\n \r\n-        <h1 className=\"special-font hero-heading absolute bottom-5 right-5 z-40 text-orange-500\">\r\n+        <h1 className=\"special-font hero-heading absolute bottom-5 right-5 z-40 text-white\">\r\n           {HERO_STRING.subtitle}\r\n         </h1>\r\n \r\n         <div className=\"absolute left-0 top-0 z-40 size-full\">\r\n"
                }
            ],
            "date": 1735255299758,
            "name": "Commit-0",
            "content": "import gsap from \"gsap\";\r\nimport { useGSAP } from \"@gsap/react\";\r\nimport { ScrollTrigger } from \"gsap/all\";\r\nimport ImageTrack from \"./ImageTrack\";\r\nimport { useState, useEffect } from \"react\";\r\n\r\ngsap.registerPlugin(ScrollTrigger);\r\n\r\nconst Hero = () => {\r\n  const images = [\r\n    '/img/portfolio-7.png',\r\n    '/img/portfolio-1.jpg',\r\n    '/img/portfolio-2.jpg',\r\n    '/img/portfolio-3.jpg',\r\n    '/img/portfolio-4.jpg',\r\n    '/img/portfolio-5.png',\r\n    '/img/portfolio-6.png'\r\n  ];\r\n\r\n  const [mouseDownAt, setMouseDownAt] = useState(\"0\");\r\n  const [percentage, setPercentage] = useState(\"0\");\r\n  const [prevPercentage, setPrevPercentage] = useState(\"0\");\r\n\r\n  const handleMouseDown = (e) => {\r\n    const clientX = e.clientX || e.touches?.[0]?.clientX || \"0\";\r\n    setMouseDownAt(clientX);\r\n  };\r\n\r\n  const handleMouseUp = () => {\r\n    setMouseDownAt(\"0\");\r\n    setPrevPercentage(percentage);\r\n  };\r\n\r\n  const handleMouseMove = (e) => {\r\n    if (mouseDownAt === \"0\") return;\r\n\r\n    const clientX = e.clientX || e.touches?.[0]?.clientX || 0;\r\n    const mouseDelta = parseFloat(mouseDownAt) - clientX;\r\n    \r\n    const baseMultiplier = 2;\r\n    const imageCountMultiplier = Math.ceil(images.length / 3);\r\n    let maxDelta = window.innerWidth * baseMultiplier * imageCountMultiplier;\r\n    if (maxDelta > 300) {\r\n      maxDelta = 100;\r\n    }\r\n\r\n    // 计算最大移动范围\r\n    // 大屏幕是42，小屏幕是62\r\n    const itemWidth = window.innerWidth > 768 ? 42 : 62;\r\n    const totalItems = images.length + 3;\r\n    // 计算需要的额外移动空间（百分比）\r\n    const maxMovePercentage = -(totalItems * itemWidth);\r\n\r\n    const nextPercentageUnconstrained = (mouseDelta / maxDelta) * -100 + parseFloat(prevPercentage);\r\n    const nextPercentage = Math.max(Math.min(nextPercentageUnconstrained, 0), maxMovePercentage);\r\n\r\n    setPercentage(nextPercentage.toString());\r\n  };\r\n\r\n  const handlePercentageChange = (newPercentage) => {\r\n    setPercentage(newPercentage);\r\n  };\r\n\r\n  // 阻止默认的触摸行为（如滚动）\r\n  const preventDefault = (e) => {\r\n    e.preventDefault();\r\n  };\r\n\r\n  useEffect(() => {\r\n    const element = document.getElementById('image-container');\r\n    if (element) {\r\n      element.addEventListener('touchmove', preventDefault, { passive: false });\r\n    }\r\n    return () => {\r\n      if (element) {\r\n        element.removeEventListener('touchmove', preventDefault);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  useGSAP(() => {\r\n    gsap.set(\"#image-container\", {\r\n      clipPath: \"polygon(14% 0, 72% 0, 88% 90%, 0 95%)\",\r\n      borderRadius: \"0% 0% 40% 10%\",\r\n    });\r\n    gsap.from(\"#image-container\", {\r\n      clipPath: \"polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)\",\r\n      borderRadius: \"0% 0% 0% 0%\",\r\n      ease: \"power1.inOut\",\r\n      scrollTrigger: {\r\n        trigger: \"#image-container\",\r\n        start: \"center center\",\r\n        end: \"bottom center\",\r\n        scrub: true,\r\n      },\r\n    });\r\n  });\r\n\r\n  return (\r\n    <div \r\n      className=\"relative h-dvh w-screen overflow-x-hidden\"\r\n      onMouseDown={handleMouseDown}\r\n      onMouseUp={handleMouseUp}\r\n      onMouseMove={handleMouseMove}\r\n      onTouchStart={handleMouseDown}\r\n      onTouchEnd={handleMouseUp}\r\n      onTouchMove={handleMouseMove}\r\n    >\r\n      <div\r\n        id=\"image-container\"\r\n        className=\"relative z-10 h-dvh w-screen overflow-hidden rounded-lg bg-blue-75\"\r\n      >\r\n        <ImageTrack \r\n          images={images}\r\n          externalMouseDownAt={mouseDownAt}\r\n          externalPercentage={percentage}\r\n          onPercentageChange={handlePercentageChange}\r\n        />\r\n\r\n        <h1 className=\"special-font hero-heading absolute bottom-5 right-5 z-40 text-blue-75\">\r\n          G<b>A</b>MING\r\n        </h1>\r\n\r\n        <div className=\"absolute left-0 top-0 z-40 size-full\">\r\n          <div className=\"mt-24 px-5 sm:px-10\">\r\n            <h1 className=\"special-font hero-heading text-blue-100\">\r\n              redefi<b>n</b>e\r\n            </h1>\r\n\r\n            <p className=\"mb-5 max-w-64 font-robert-regular text-blue-100\">\r\n              Enter the Metagame Layer <br /> Unleash the Play Economy\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <h1 className=\"special-font hero-heading absolute bottom-5 right-5 text-black\">\r\n        G<b>A</b>MING\r\n      </h1>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Hero;\r\n"
        }
    ]
}